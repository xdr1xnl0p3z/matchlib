<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>MatchLib: Master&lt; axiCfg, cfg &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MatchLib
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="class_master-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Master&lt; axiCfg, cfg &gt; Class Template Reference<div class="ingroups"><a class="el" href="group___match_module.html">Timed units - implemented as sc_module</a> &raquo; <a class="el" href="group___a_x_i.html">AXI</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>An AXI master that generates random traffic for use in a testbench.  
 <a href="class_master.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_master_8h_source.html">Master.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Master&lt; axiCfg, cfg &gt;:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_master.png" usemap="#Master_3C_20axiCfg_2C_20cfg_20_3E_map" alt=""/>
  <map id="Master_3C_20axiCfg_2C_20cfg_20_3E_map" name="Master&lt; axiCfg, cfg &gt;_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a37a2fea2e19d50b321b0b44b966b1cf3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a37a2fea2e19d50b321b0b44b966b1cf3"></a>
typedef <a class="el" href="classaxi_1_1axi4.html">axi::axi4</a>&lt; axiCfg &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>axi4_</b></td></tr>
<tr class="separator:a37a2fea2e19d50b321b0b44b966b1cf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1f9f731212dad723533a8a0a56e981d8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1f9f731212dad723533a8a0a56e981d8"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>SC_CTOR</b> (<a class="el" href="class_master.html">Master</a>)</td></tr>
<tr class="separator:a1f9f731212dad723533a8a0a56e981d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a3131fd5a3c983b557cedc1029fa94c79"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3131fd5a3c983b557cedc1029fa94c79"></a>
axi4_::read::template master&#160;</td><td class="memItemRight" valign="bottom"><b>if_rd</b></td></tr>
<tr class="separator:a3131fd5a3c983b557cedc1029fa94c79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a735d77432ab1513a229e434dace61dd8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a735d77432ab1513a229e434dace61dd8"></a>
axi4_::write::template master&#160;</td><td class="memItemRight" valign="bottom"><b>if_wr</b></td></tr>
<tr class="separator:a735d77432ab1513a229e434dace61dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5fe6e79e12bd9700d26683fed68f629"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af5fe6e79e12bd9700d26683fed68f629"></a>
sc_in&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>reset_bar</b></td></tr>
<tr class="separator:af5fe6e79e12bd9700d26683fed68f629"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4891f810d95936ac65e276ff410cdb6b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4891f810d95936ac65e276ff410cdb6b"></a>
sc_in&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>clk</b></td></tr>
<tr class="separator:a4891f810d95936ac65e276ff410cdb6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addd345daf11306393bc71cd20aaa9434"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="addd345daf11306393bc71cd20aaa9434"></a>
std::map&lt; typename axi4_::Addr, typename axi4_::Data &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>localMem</b></td></tr>
<tr class="separator:addd345daf11306393bc71cd20aaa9434"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7ab4e614e083e4f7f5ebc4c230803a2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af7ab4e614e083e4f7f5ebc4c230803a2"></a>
std::map&lt; typename axi4_::Addr, NVUINT8 &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>localMem_wstrb</b></td></tr>
<tr class="separator:af7ab4e614e083e4f7f5ebc4c230803a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a01c097b75da9478bfac894b81a0af9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1a01c097b75da9478bfac894b81a0af9"></a>
std::vector&lt; typename axi4_::Addr &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>validReadAddresses</b></td></tr>
<tr class="separator:a1a01c097b75da9478bfac894b81a0af9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9dd5e4ba949c98185048cf8a2dcad77"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab9dd5e4ba949c98185048cf8a2dcad77"></a>
std::vector&lt; typename axi4_::Addr &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>validReadAddresses_q</b></td></tr>
<tr class="separator:ab9dd5e4ba949c98185048cf8a2dcad77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c9175acfa87289f24c3dffa2e0e4fe6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9c9175acfa87289f24c3dffa2e0e4fe6"></a>
std::vector&lt; long long &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>validReadAddresses_ctr</b></td></tr>
<tr class="separator:a9c9175acfa87289f24c3dffa2e0e4fe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3ff0e84cd493249cc403781111354dd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae3ff0e84cd493249cc403781111354dd"></a>
sc_out&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>done</b></td></tr>
<tr class="separator:ae3ff0e84cd493249cc403781111354dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a39ccdfe4aae59b4251e707478f975fb4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a39ccdfe4aae59b4251e707478f975fb4"></a>
static const int&#160;</td><td class="memItemRight" valign="bottom"><b>kDebugLevel</b> = 0</td></tr>
<tr class="separator:a39ccdfe4aae59b4251e707478f975fb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d2f1446864296daeb59e33c7f06c6f9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2d2f1446864296daeb59e33c7f06c6f9"></a>
static const int&#160;</td><td class="memItemRight" valign="bottom"><b>bytesPerBeat</b> = axi4_::DATA_WIDTH &gt;&gt; 3</td></tr>
<tr class="separator:a2d2f1446864296daeb59e33c7f06c6f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4168b15bb23505a67cd1424654ac587b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4168b15bb23505a67cd1424654ac587b"></a>
static const bool&#160;</td><td class="memItemRight" valign="bottom"><b>wResp</b> = axiCfg::useWriteResponses</td></tr>
<tr class="separator:a4168b15bb23505a67cd1424654ac587b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a56483d27600d8de2e5d24c3ab3b8818a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a56483d27600d8de2e5d24c3ab3b8818a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>run</b> ()</td></tr>
<tr class="separator:a56483d27600d8de2e5d24c3ab3b8818a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename axiCfg, typename cfg&gt;<br />
class Master&lt; axiCfg, cfg &gt;</h3>

<p>An AXI master that generates random traffic for use in a testbench. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">axiCfg</td><td>A valid AXI config. </td></tr>
    <tr><td class="paramname">cfg</td><td>A valid config for the master (such as <a class="el" href="structmaster_cfg.html" title="An example config for the AXI master. ">masterCfg</a>).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Overview</dt><dd><a class="el" href="class_master.html" title="An AXI master that generates random traffic for use in a testbench. ">Master</a> is an AXI master block for use in testbenches. It generates read and write requests and checks the responses. The block supports AXI configurations with and without burst mode, write strobes, and write responses. The block enforces the following via assertion:<ul>
<li><a class="el" href="class_master.html" title="An AXI master that generates random traffic for use in a testbench. ">Master</a> may not issue a read to an address it has not yet written to.</li>
<li>Read response data must match the most recent write data to the same address.</li>
<li><a class="el" href="class_master.html" title="An AXI master that generates random traffic for use in a testbench. ">Master</a> may not issue writes with no strobe bits asserted to an address and then read from that address.</li>
<li>Responses should assert the AXI "OKAY" response code.</li>
<li>The number of read (write) responses should not exceed the number of read (write) requests.</li>
</ul>
</dd></dl>
<p>In addition, the block asserts a done signal only when each request has received a corresponding response. The <a class="el" href="class_master.html" title="An AXI master that generates random traffic for use in a testbench. ">Master</a> generates random requests according to the following algorithm:</p><ul>
<li>Writes are generated to an address randomly selected from the valid range. 20% of writes have burst length greater than one; these writes randomly select a burst length from the valid range. 20% of write data beats have nonuniform strobes; the strobe bits of these write data beats are randomly set. Some data bits are generated via a hash of the address, while others are randomly generated. The data associated with a given address is stored locally so reads to that address can be validated later.</li>
<li>Every AXI address that is written to (including multiple addresses for bursts) is added to the list of valid read addresses, which is initially empty. If write responses are enabled, the addresses are added only when the write response is received; otherwise, they are added when the write is sent.</li>
<li>If the readDelay is greater than zero, a delay elapses before addresses that have been written to are added to the list of valid read addresses. If a write is issued to an address that has been previously written to, the address is removed from the list of valid read addresses and the readDelay timer for that address is reset.</li>
<li>Writes that are issued to an address that has an outstanding read request in flight are discarded and not issued. Reads that are issued to an address that has an outstanding write request in flight are not issued (unless write requests are not supported, in which case only a non-zero readDelay prevents this race).</li>
<li>Reads are randomly selected from the list of valid read addresses, so that reads only issue to address that have already been written to. This means that no reads issue until the first write response has returned.</li>
<li>50% of reads requests are initiated as bursts, with the burst length randomly selected from the valid range. If a read burst would include one or more addresses as part of the burst that have not yet been written to, the read request is discarded and not issued. </li>
</ul>

<p>Definition at line <a class="el" href="_master_8h_source.html#l00087">87</a> of file <a class="el" href="_master_8h_source.html">Master.h</a>.</p>
</div><hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="_master_8h_source.html">Master.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Dec 13 2019 19:49:43 for MatchLib by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
